The Caryatids, by Bruce Sterling. 

The world of 2060 is divided into three spheres of influence, each fighting with the others over the resources of fallen nations and an environment degraded almost to the point of no return. There is the Dispensation, centered in Los Angeles, where entertainment and capitalism have fused with the highest of high-tech. There is the Acquis, a Green-centered collective that uses invasive neurological technology to create a networked utopia (at one point the author refers to it explicitly as a system based on “commons-based peer production”. And there is China, the sole surviving nation-state, a dinosaur that has prospered only by pitilessly pruning its own population.